(()=>{var e={};e.id=780,e.ids=[780],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29570:(e,r,t)=>{Promise.resolve().then(t.bind(t,44067))},32192:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},33873:e=>{"use strict";e.exports=require("path")},44067:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>$});var s=t(60687),a=t(44493),n=t(43210),l=t(62688);let i=(0,l.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var o=t(8693),d=t(54050),c=t(16189),m=t(52581),p=t(95884),u=t(45880);let x=u.z.object({name:u.z.string().min(1,"Name is required"),floor_range_start:u.z.string().min(1,"Floor range start is required"),floor_range_end:u.z.string().min(1,"Floor range end is required"),starting_apartment_number:u.z.string().min(1,"Starting apartment number is required"),apartments_per_floor:u.z.string().min(1,"Apartments per floor is required")}),g={name:"",floor_range_start:"",floor_range_end:"",starting_apartment_number:"",apartments_per_floor:""},h=({onSuccess:e})=>{let r=(0,c.useParams)().buildingID,t=(0,o.jE)(),[l,u]=(0,n.useState)({...g}),[h,f]=(0,n.useState)({}),[b,j]=(0,n.useState)(null),[y,v]=(0,n.useState)(null),N=(0,d.n)({mutationFn:p.$.addPlan,onSuccess:()=>{m.oR.success("Floor plan created successfully"),t.invalidateQueries({queryKey:["floorPlanList"]}),w(),e()},onError:e=>{console.error("Error creating floor plan:",e),m.oR.error("Failed to create floor plan")}}),_=e=>{let{name:r,value:t}=e.target;u(e=>({...e,[r]:t})),h[r]&&f(e=>({...e,[r]:void 0}))},w=()=>{u({...g}),f({}),j(null),v(null)},k=(e,r)=>{e.target.files&&e.target.files[0]&&("desktop"===r?j(e.target.files[0]):v(e.target.files[0]))};return(0,s.jsxs)(a.Zp,{className:"w-full",children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{children:"Create New Floor Plan"})}),(0,s.jsx)(a.Wu,{className:"px-4",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=x.safeParse(l);if(!t.success){let e={};t.error.errors.forEach(r=>{e[r.path[0]]=r.message}),f(e);return}if(!b||!y){m.oR.error("Both desktop and mobile images are required");return}let s=new FormData;Object.entries(l).forEach(([e,r])=>{s.append(e,r)}),s.append("building_id",r),s.append("desktop_image",b),s.append("mobile_image",y),N.mutate(s)},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Building ID"}),(0,s.jsx)("input",{type:"text",value:r,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-100",disabled:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",name:"name",value:l.name,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Floor Plan Name"}),h.name&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.name})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Floor Range Start"}),(0,s.jsx)("input",{type:"number",name:"floor_range_start",value:l.floor_range_start,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"}),h.floor_range_start&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.floor_range_start})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Floor Range End"}),(0,s.jsx)("input",{type:"number",name:"floor_range_end",value:l.floor_range_end,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"}),h.floor_range_end&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.floor_range_end})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Starting Apartment Number"}),(0,s.jsx)("input",{type:"number",name:"starting_apartment_number",value:l.starting_apartment_number,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"}),h.starting_apartment_number&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.starting_apartment_number})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Apartments per Floor"}),(0,s.jsx)("input",{type:"number",name:"apartments_per_floor",value:l.apartments_per_floor,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"}),h.apartments_per_floor&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.apartments_per_floor})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Desktop Image"}),(0,s.jsx)("input",{type:"file",name:"desktop_image",accept:"image/*",onChange:e=>k(e,"desktop"),className:"mt-1 block w-full"}),!b&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:"Desktop image is required"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Image"}),(0,s.jsx)("input",{type:"file",name:"mobile_image",accept:"image/*",onChange:e=>k(e,"mobile"),className:"mt-1 block w-full"}),!y&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:"Mobile image is required"})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:N.isPending,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-blue-300 flex items-center",children:N.isPending?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):"Create Floor Plan"})})]})})]})},f=(0,l.A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),b=(0,l.A)("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);var j=t(88233),y=t(79410),v=t(32192);let N=(0,l.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_=(0,l.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var w=t(63503),k=t(89667),P=t(29523),A=t(29494),q=t(85814),S=t.n(q),C=t(91821),I=t(30474);let F=()=>{let e=(0,c.useParams)().buildingID,r=(0,o.jE)(),[t,l]=(0,n.useState)(!1),[m,u]=(0,n.useState)(""),[x,g]=(0,n.useState)(null),[h,q]=(0,n.useState)(""),{data:F=[],isLoading:D}=(0,A.I)({queryKey:["floorPlanList",e],queryFn:async()=>{try{return await p.$.getList(e)}catch(e){return console.error("Error fetching floor plans:",e),[]}},staleTime:3e5,gcTime:18e5,retry:1}),$=(0,d.n)({mutationFn:async e=>{await p.$.deletePlan(e)},onSuccess:()=>{r.invalidateQueries({queryKey:["floorPlanList"]}),z()},onError:e=>{console.error("Error deleting floor plan:",e)}}),E=e=>{g(e),u(""),q(""),l(!0)},z=()=>{l(!1),g(null),u(""),q("")};return(0,s.jsxs)("section",{className:"w-full  ",children:[D?(0,s.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsx)(i,{className:"h-10 w-10 animate-spin text-primary"}),(0,s.jsx)("p",{className:"text-gray-500 font-medium",children:"Loading floor plans..."})]})}):0===F.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[(0,s.jsx)(f,{className:"h-16 w-16 text-gray-300 mb-4"}),(0,s.jsx)("p",{className:"text-gray-500 text-center mb-2 text-lg font-medium",children:"No floor plans found"}),(0,s.jsx)("p",{className:"text-gray-400 text-center max-w-md",children:"Add new floor plans to see them displayed here."})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:F.map(r=>(0,s.jsxs)(a.Zp,{className:"overflow-hidden hover:shadow-lg transition-all duration-200 border border-gray-200 rounded-xl group",children:[(0,s.jsxs)("div",{className:"aspect-video relative overflow-hidden bg-gray-100",children:[r.desktop_image?(0,s.jsx)(I.default,{width:600,height:600,src:`https://api.aisigroup.ge/${r.desktop_image}`,alt:`Floor plan ${r.name}`,className:"object-cover w-full h-full  transition-transform duration-300"}):(0,s.jsxs)("div",{className:"flex items-center justify-center h-full text-gray-400 bg-gray-50",children:[(0,s.jsx)(b,{className:"w-12 h-12 mr-2 opacity-40"}),(0,s.jsx)("span",{className:"font-medium",children:"No Image"})]}),(0,s.jsx)("div",{className:"absolute top-3 right-3",children:(0,s.jsx)(P.$,{variant:"ghost",size:"icon",className:"bg-white/90 text-red-500 hover:bg-white hover:text-red-600 rounded-full h-8 w-8 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>E(r.id.toString()),children:(0,s.jsx)(j.A,{className:"w-4 h-4"})})})]}),(0,s.jsxs)(a.Wu,{className:"p-5",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-4 line-clamp-1 text-gray-800",children:r.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-3 mb-5",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(y.A,{className:"w-4 h-4 mr-2 text-indigo-400"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Floors:"})," ",r.floor_range_start," - ",r.floor_range_end]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(v.A,{className:"w-4 h-4 mr-2 text-indigo-400"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Units per floor:"})," ",r.apartments_per_floor]})]})]}),(0,s.jsx)(S(),{href:`/admin/building/${e}/${r.id}`,className:"block w-full",children:(0,s.jsxs)(P.$,{className:"w-full bg-indigo-500 hover:bg-indigo-600 transition-colors",children:[(0,s.jsx)(N,{className:"mr-2 h-4 w-4"})," View Details"]})})]})]},r.id))})}),(0,s.jsx)(w.lG,{open:t,onOpenChange:l,children:(0,s.jsxs)(w.Cf,{className:"sm:max-w-md rounded-lg",children:[(0,s.jsxs)(w.c7,{children:[(0,s.jsx)(w.L3,{className:"text-xl font-semibold text-gray-800",children:"Confirm Deletion"}),(0,s.jsx)(w.rr,{className:"mt-2 text-gray-600",children:"Please enter admin password to delete this floor plan. This action cannot be undone."})]}),h&&(0,s.jsxs)(C.Fc,{variant:"destructive",className:"mt-2",children:[(0,s.jsx)(_,{className:"h-4 w-4 mr-2"}),(0,s.jsx)(C.TN,{children:h})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{htmlFor:"password",className:"text-sm font-medium mb-2 block text-gray-700",children:"Admin Password"}),(0,s.jsx)(k.p,{id:"password",type:"password",value:m,onChange:e=>u(e.target.value),placeholder:"Enter password",className:"mt-1",autoFocus:!0})]}),(0,s.jsxs)(w.Es,{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)(P.$,{variant:"outline",onClick:z,children:"Cancel"}),(0,s.jsxs)(P.$,{variant:"destructive",onClick:()=>{"Adminuser111"===m?x&&$.mutate(x):q("Incorrect password. Please try again.")},children:[(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]})};var D=t(96474);function $(){let[e,r]=(0,n.useState)(!1);return(0,s.jsxs)("section",{className:"w-full px-10",children:[(0,s.jsxs)(a.aR,{className:"flex flex-row items-center justify-between py-4 px-4",children:[(0,s.jsx)(a.ZB,{children:"Floor Plans"}),(0,s.jsxs)(w.lG,{open:e,onOpenChange:r,children:[(0,s.jsx)(w.zM,{asChild:!0,children:(0,s.jsxs)(P.$,{className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:[(0,s.jsx)(D.A,{className:"w-4 h-4"}),"Add New Floor Plan"]})}),(0,s.jsxs)(w.Cf,{className:"max-h-[calc(100vh-20%)] min-w-[1000px] overflow-y-auto",children:[(0,s.jsx)(w.c7,{children:(0,s.jsx)(w.L3,{children:"Add New Floor Plan"})}),(0,s.jsx)(h,{onSuccess:()=>r(!1)})]})]})]}),(0,s.jsx)(F,{})]})}},44493:(e,r,t)=>{"use strict";t.d(r,{BT:()=>o,Wu:()=>d,ZB:()=>i,Zp:()=>n,aR:()=>l});var s=t(60687);t(43210);var a=t(4780);function n({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function l({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function i({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function o({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function d({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}},45288:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\AISI Group\\\\property-frontend\\\\src\\\\app\\\\[locale]\\\\admin\\\\building\\\\[buildingID]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\AISI Group\\property-frontend\\src\\app\\[locale]\\admin\\building\\[buildingID]\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},81689:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(65239),a=t(48088),n=t(88170),l=t.n(n),i=t(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(r,o);let d={children:["",{children:["[locale]",{children:["admin",{children:["building",{children:["[buildingID]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,45288)),"D:\\Projects\\AISI Group\\property-frontend\\src\\app\\[locale]\\admin\\building\\[buildingID]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4246)),"D:\\Projects\\AISI Group\\property-frontend\\src\\app\\[locale]\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,26902))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(t.bind(t,95450))).default(e)],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,11434)),"D:\\Projects\\AISI Group\\property-frontend\\src\\app\\[locale]\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\Projects\\AISI Group\\property-frontend\\src\\app\\[locale]\\admin\\building\\[buildingID]\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/[locale]/admin/building/[buildingID]/page",pathname:"/[locale]/admin/building/[buildingID]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},83997:e=>{"use strict";e.exports=require("tty")},89402:(e,r,t)=>{Promise.resolve().then(t.bind(t,45288))},94735:e=>{"use strict";e.exports=require("events")},95884:(e,r,t)=>{"use strict";t.d(r,{$:()=>n});var s=t(11610),a=t(15659);let n={getList:async e=>(await s.S.get(`/floor_plans/${e}`)).data,deletePlan:async e=>(await s.S.delete(`/delete_plan/${e}`)).data,addPlan:async e=>{let r=a.A.get("token");return(await s.S.post("/add_floor_plan",e,{headers:{"Content-Type":"multipart/form-data",Authorization:r?`Bearer ${r}`:""}})).data},getApartments:async(e,r,t,a=1,n=20)=>{let l=`/apartments/${e}`;r&&(l+=`/${r}`);let i=new URLSearchParams;return i.append("page",a.toString()),i.append("limit",n.toString()),void 0!==t&&i.append("floor",t.toString()),l+=`?${i.toString()}`,(await s.S.get(l)).data}}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,825,544,494,167,880,178,634],()=>t(81689));module.exports=s})();